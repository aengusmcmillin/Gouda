using namespace metal;

struct VertexUniforms {
    float4x4 mat;
};

struct ColoredVertex
{
    float4 position [[position]];
    float4 color;
};

vertex ColoredVertex vertex_main(constant float4 *position [[buffer(0)]],
                                 constant float4 &color [[buffer(1)]],
                                 constant VertexUniforms &transformation [[buffer(2)]],
                                 constant VertexUniforms &projection [[buffer(3)]],
                                 constant VertexUniforms &view [[buffer(4)]],
                                 uint vid [[vertex_id]])
{
    ColoredVertex vert;
    vert.position = position[vid] * transformation.mat * view.mat * projection.mat;
    vert.color = color;
    return vert;
}
